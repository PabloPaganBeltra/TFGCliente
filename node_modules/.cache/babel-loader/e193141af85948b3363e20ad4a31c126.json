{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Pablo PC/Desktop/Carpeta/AproyectosReact/MERNTasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Pablo PC/Desktop/Carpeta/AproyectosReact/MERNTasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Pablo PC/Desktop/Carpeta/AproyectosReact/MERNTasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import TareaContext from'./tareaContext';import TareaReducer from'./tareaReducer';import{TAREAS_PROYECTO,AGREGAR_TAREA,VALIDAR_TAREA,ELIMINAR_TAREA,TAREA_ACTUAL,ACTUALIZAR_TAREA}from'../../types';import clienteAxios from'../../config/axios';import{jsx as _jsx}from\"react/jsx-runtime\";var TareaState=function TareaState(props){var initialState={tareasproyecto:[],errortarea:false,tareaseleccionada:null};//Crear dispatch y state\nvar _useReducer=useReducer(TareaReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//CREAR LAS FUNCIONES QUE NECESITAMOS DE LAS TAREAS\n//Obtener las tareas de un proyecto \nvar obtenerTareas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(proyecto){var resultado;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return clienteAxios.get('/api/tareas',{params:{proyecto:proyecto}});case 3:resultado=_context.sent;dispatch({type:TAREAS_PROYECTO,payload:resultado.data.tareas});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function obtenerTareas(_x){return _ref.apply(this,arguments);};}();// Anyadir una tarea al proyecto seleccionado\nvar agregarTarea=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tarea){var resultado;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return clienteAxios.post('/api/tareas',tarea);case 3:resultado=_context2.sent;dispatch({type:AGREGAR_TAREA,payload:resultado.data.tarea});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function agregarTarea(_x2){return _ref2.apply(this,arguments);};}();//Validar y mostrar un error en caso de ser necesario\nvar validarTarea=function validarTarea(){dispatch({type:VALIDAR_TAREA});};//Eliminar las tareas por el id\nvar eliminarTarea=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,proyecto){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return clienteAxios.delete(\"/api/tareas/\".concat(id),{params:{proyecto:proyecto}});case 3:dispatch({type:ELIMINAR_TAREA,payload:id});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function eliminarTarea(_x3,_x4){return _ref3.apply(this,arguments);};}();//edita o modifica una tarea\nvar actualizarTarea=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(tarea){var resultado;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return clienteAxios.put(\"/api/tareas/\".concat(tarea._id),tarea);case 3:resultado=_context4.sent;dispatch({type:ACTUALIZAR_TAREA,payload:resultado.data.tarea});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function actualizarTarea(_x5){return _ref4.apply(this,arguments);};}();//Extraer una tarea para la edicion\nvar guardarTareaActual=function guardarTareaActual(tarea){dispatch({type:TAREA_ACTUAL,payload:tarea});};return/*#__PURE__*/_jsx(TareaContext.Provider,{value:{tareasproyecto:state.tareasproyecto,errortarea:state.errortarea,tareaseleccionada:state.tareaseleccionada,obtenerTareas:obtenerTareas,agregarTarea:agregarTarea,validarTarea:validarTarea,eliminarTarea:eliminarTarea,guardarTareaActual:guardarTareaActual,actualizarTarea:actualizarTarea},children:props.children});};export default TareaState;","map":{"version":3,"sources":["C:/Users/Pablo PC/Desktop/Carpeta/AproyectosReact/MERNTasks/cliente/src/context/tareas/tareaState.js"],"names":["React","useReducer","TareaContext","TareaReducer","TAREAS_PROYECTO","AGREGAR_TAREA","VALIDAR_TAREA","ELIMINAR_TAREA","TAREA_ACTUAL","ACTUALIZAR_TAREA","clienteAxios","TareaState","props","initialState","tareasproyecto","errortarea","tareaseleccionada","state","dispatch","obtenerTareas","proyecto","get","params","resultado","type","payload","data","tareas","console","log","agregarTarea","tarea","post","validarTarea","eliminarTarea","id","delete","actualizarTarea","put","_id","guardarTareaActual","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\r\nimport TareaContext from './tareaContext';\r\nimport TareaReducer from './tareaReducer';\r\nimport {\r\n    TAREAS_PROYECTO,\r\n    AGREGAR_TAREA,\r\n    VALIDAR_TAREA,\r\n    ELIMINAR_TAREA,\r\n    TAREA_ACTUAL,\r\n    ACTUALIZAR_TAREA\r\n} from '../../types';\r\nimport clienteAxios from '../../config/axios';\r\n\r\nconst TareaState = props => {\r\n    const initialState={\r\n        tareasproyecto: [],\r\n        errortarea: false,\r\n        tareaseleccionada: null\r\n    }\r\n\r\n    //Crear dispatch y state\r\n    const [state, dispatch] = useReducer(TareaReducer, initialState);\r\n\r\n\r\n    //CREAR LAS FUNCIONES QUE NECESITAMOS DE LAS TAREAS\r\n\r\n    //Obtener las tareas de un proyecto \r\n    const obtenerTareas = async proyecto =>{\r\n        \r\n        try {\r\n            const resultado = await clienteAxios.get('/api/tareas',{ params: { proyecto }});\r\n            dispatch({\r\n                type: TAREAS_PROYECTO,\r\n                payload: resultado.data.tareas\r\n                \r\n            });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    // Anyadir una tarea al proyecto seleccionado\r\n    const agregarTarea = async tarea=>{\r\n        try {\r\n            const resultado = await clienteAxios.post('/api/tareas', tarea);\r\n\r\n            dispatch({\r\n                type: AGREGAR_TAREA,\r\n                payload: resultado.data.tarea\r\n            });\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    //Validar y mostrar un error en caso de ser necesario\r\n    const validarTarea = () =>{\r\n        dispatch({\r\n            type: VALIDAR_TAREA\r\n        });\r\n    }\r\n\r\n    //Eliminar las tareas por el id\r\n    const eliminarTarea = async (id, proyecto) => {\r\n        try {\r\n            await clienteAxios.delete(`/api/tareas/${id}`, {params: {proyecto}});\r\n            dispatch({\r\n                type: ELIMINAR_TAREA,\r\n                payload: id\r\n            });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    //edita o modifica una tarea\r\n    const actualizarTarea = async tarea => {\r\n        try {\r\n            const resultado= await clienteAxios.put(`/api/tareas/${tarea._id}`, tarea);\r\n            dispatch({\r\n                type: ACTUALIZAR_TAREA,\r\n                payload : resultado.data.tarea\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    //Extraer una tarea para la edicion\r\n    const guardarTareaActual = tarea =>{\r\n        dispatch({\r\n            type: TAREA_ACTUAL,\r\n            payload : tarea\r\n        })\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <TareaContext.Provider\r\n        value={{\r\n            tareasproyecto : state.tareasproyecto,\r\n            errortarea: state.errortarea,\r\n            tareaseleccionada: state.tareaseleccionada,\r\n            obtenerTareas,\r\n            agregarTarea,\r\n            validarTarea,\r\n            eliminarTarea,\r\n            guardarTareaActual,\r\n            actualizarTarea\r\n        }}\r\n        >\r\n            {props.children}\r\n        </TareaContext.Provider>\r\n    )\r\n}\r\n\r\nexport default TareaState;"]},"metadata":{},"sourceType":"module"}